<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.sdml.info/srcML/src" xmlns:cpp="http://www.sdml.info/srcML/cpp" xmlns:lit="http://www.sdml.info/srcML/literal" xmlns:op="http://www.sdml.info/srcML/operator" xmlns:type="http://www.sdml.info/srcML/modifier" xmlns:pos="http://www.sdml.info/srcML/position" language="C#" filename="D:\Research\Subjects\Glimpse-master\source\Glimpse.WebForms.WingTip.Sample\Admin\AdminPage.aspx.cs" pos:tabs="8"><using pos:line="1" pos:column="1">using <name pos:line="1" pos:column="7">System</name>;</using>
<using pos:line="2" pos:column="1">using <name><name pos:line="2" pos:column="7">System</name><op:operator pos:line="2" pos:column="13">.</op:operator><name pos:line="2" pos:column="14">Collections</name><op:operator pos:line="2" pos:column="25">.</op:operator><name pos:line="2" pos:column="26">Generic</name></name>;</using>
<using pos:line="3" pos:column="1">using <name><name pos:line="3" pos:column="7">System</name><op:operator pos:line="3" pos:column="13">.</op:operator><name pos:line="3" pos:column="14">Linq</name></name>;</using>
<using pos:line="4" pos:column="1">using <name><name pos:line="4" pos:column="7">System</name><op:operator pos:line="4" pos:column="13">.</op:operator><name pos:line="4" pos:column="14">Web</name></name>;</using>
<using pos:line="5" pos:column="1">using <name><name pos:line="5" pos:column="7">System</name><op:operator pos:line="5" pos:column="13">.</op:operator><name pos:line="5" pos:column="14">Web</name><op:operator pos:line="5" pos:column="17">.</op:operator><name pos:line="5" pos:column="18">UI</name></name>;</using>
<using pos:line="6" pos:column="1">using <name><name pos:line="6" pos:column="7">System</name><op:operator pos:line="6" pos:column="13">.</op:operator><name pos:line="6" pos:column="14">Web</name><op:operator pos:line="6" pos:column="17">.</op:operator><name pos:line="6" pos:column="18">UI</name><op:operator pos:line="6" pos:column="20">.</op:operator><name pos:line="6" pos:column="21">WebControls</name></name>;</using>
<using pos:line="7" pos:column="1">using <name><name pos:line="7" pos:column="7">WingtipToys</name><op:operator pos:line="7" pos:column="18">.</op:operator><name pos:line="7" pos:column="19">Models</name></name>;</using>
<using pos:line="8" pos:column="1">using <name><name pos:line="8" pos:column="7">WingtipToys</name><op:operator pos:line="8" pos:column="18">.</op:operator><name pos:line="8" pos:column="19">Logic</name></name>;</using>

<namespace pos:line="10" pos:column="1">namespace <name><name pos:line="10" pos:column="11">WingtipToys</name><op:operator pos:line="10" pos:column="22">.</op:operator><name pos:line="10" pos:column="23">Admin</name></name>
<block pos:line="11" pos:column="1">{
    <class><specifier pos:line="12" pos:column="5">public</specifier> <specifier pos:line="12" pos:column="12">partial</specifier> class <name pos:line="12" pos:column="26">AdminPage</name> <super pos:line="12" pos:column="36">: <name><name pos:line="12" pos:column="38">System</name><op:operator pos:line="12" pos:column="44">.</op:operator><name pos:line="12" pos:column="45">Web</name><op:operator pos:line="12" pos:column="48">.</op:operator><name pos:line="12" pos:column="49">UI</name><op:operator pos:line="12" pos:column="51">.</op:operator><name pos:line="12" pos:column="52">Page</name></name></super>
    <block pos:line="13" pos:column="5">{
        <function><type><specifier pos:line="14" pos:column="9">protected</specifier> <name pos:line="14" pos:column="19">void</name></type> <name pos:line="14" pos:column="24">Page_Load</name><parameter_list pos:line="14" pos:column="33">(<param><decl><type><name pos:line="14" pos:column="34">object</name></type> <name pos:line="14" pos:column="41">sender</name></decl></param>, <param><decl><type><name pos:line="14" pos:column="49">EventArgs</name></type> <name pos:line="14" pos:column="59">e</name></decl></param>)</parameter_list>
        <block pos:line="15" pos:column="9">{
            <decl_stmt><decl><type><name pos:line="16" pos:column="13">string</name></type> <name pos:line="16" pos:column="20">productAction</name> <init pos:line="16" pos:column="34">= <expr><name><name pos:line="16" pos:column="36">Request</name><op:operator pos:line="16" pos:column="43">.</op:operator><name pos:line="16" pos:column="44">QueryString</name><index pos:line="16" pos:column="55">[<expr><lit:literal type="string" pos:line="16" pos:column="56">"ProductAction"</lit:literal></expr>]</index></name></expr></init></decl>;</decl_stmt>
            <if pos:line="17" pos:column="13">if <condition pos:line="17" pos:column="16">(<expr><name pos:line="17" pos:column="17">productAction</name> <op:operator pos:line="17" pos:column="31">==</op:operator> <lit:literal type="string" pos:line="17" pos:column="34">"add"</lit:literal></expr>)</condition><then pos:line="17" pos:column="40">
            <block pos:line="18" pos:column="13">{
                <expr_stmt><expr><name><name pos:line="19" pos:column="17">LabelAddStatus</name><op:operator pos:line="19" pos:column="31">.</op:operator><name pos:line="19" pos:column="32">Text</name></name> <op:operator pos:line="19" pos:column="37">=</op:operator> <lit:literal type="string" pos:line="19" pos:column="39">"Product added!"</lit:literal></expr>;</expr_stmt>
            }</block></then></if>

            <if pos:line="22" pos:column="13">if <condition pos:line="22" pos:column="16">(<expr><name pos:line="22" pos:column="17">productAction</name> <op:operator pos:line="22" pos:column="31">==</op:operator> <lit:literal type="string" pos:line="22" pos:column="34">"remove"</lit:literal></expr>)</condition><then pos:line="22" pos:column="43">
            <block pos:line="23" pos:column="13">{
                <expr_stmt><expr><name><name pos:line="24" pos:column="17">LabelRemoveStatus</name><op:operator pos:line="24" pos:column="34">.</op:operator><name pos:line="24" pos:column="35">Text</name></name> <op:operator pos:line="24" pos:column="40">=</op:operator> <lit:literal type="string" pos:line="24" pos:column="42">"Product removed!"</lit:literal></expr>;</expr_stmt>
            }</block></then></if>
        }</block></function>

        <function><type><specifier pos:line="28" pos:column="9">protected</specifier> <name pos:line="28" pos:column="19">void</name></type> <name pos:line="28" pos:column="24">AddProductButton_Click</name><parameter_list pos:line="28" pos:column="46">(<param><decl><type><name pos:line="28" pos:column="47">object</name></type> <name pos:line="28" pos:column="54">sender</name></decl></param>, <param><decl><type><name pos:line="28" pos:column="62">EventArgs</name></type> <name pos:line="28" pos:column="72">e</name></decl></param>)</parameter_list>
        <block pos:line="29" pos:column="9">{
            <decl_stmt><decl><type><name pos:line="30" pos:column="13">Boolean</name></type> <name pos:line="30" pos:column="21">fileOK</name> <init pos:line="30" pos:column="28">= <expr><lit:literal type="boolean" pos:line="30" pos:column="30">false</lit:literal></expr></init></decl>;</decl_stmt>
            <decl_stmt><decl><type><name pos:line="31" pos:column="13">String</name></type> <name pos:line="31" pos:column="20">path</name> <init pos:line="31" pos:column="25">= <expr><call><name><name pos:line="31" pos:column="27">Server</name><op:operator pos:line="31" pos:column="33">.</op:operator><name pos:line="31" pos:column="34">MapPath</name></name><argument_list pos:line="31" pos:column="41">(<argument><expr><lit:literal type="string" pos:line="31" pos:column="42">"~/Catalog/Images/"</lit:literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
            <if pos:line="32" pos:column="13">if <condition pos:line="32" pos:column="16">(<expr><name><name pos:line="32" pos:column="17">ProductImage</name><op:operator pos:line="32" pos:column="29">.</op:operator><name pos:line="32" pos:column="30">HasFile</name></name></expr>)</condition><then pos:line="32" pos:column="38">
            <block pos:line="33" pos:column="13">{
                <decl_stmt><decl><type><name pos:line="34" pos:column="17">String</name></type> <name pos:line="34" pos:column="24">fileExtension</name> <init pos:line="34" pos:column="38">= <expr><call><name><name pos:line="34" pos:column="40">System</name><op:operator pos:line="34" pos:column="46">.</op:operator><name pos:line="34" pos:column="47">IO</name><op:operator pos:line="34" pos:column="49">.</op:operator><name pos:line="34" pos:column="50">Path</name><op:operator pos:line="34" pos:column="54">.</op:operator><name pos:line="34" pos:column="55">GetExtension</name></name><argument_list pos:line="34" pos:column="67">(<argument><expr><name><name pos:line="34" pos:column="68">ProductImage</name><op:operator pos:line="34" pos:column="80">.</op:operator><name pos:line="34" pos:column="81">FileName</name></name></expr></argument>)</argument_list></call><op:operator pos:line="34" pos:column="90">.</op:operator><call><name pos:line="34" pos:column="91">ToLower</name><argument_list pos:line="34" pos:column="98">()</argument_list></call></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name pos:line="35" pos:column="17">String</name><index pos:line="35" pos:column="23">[]</index></type> <name pos:line="35" pos:column="26">allowedExtensions</name> <init pos:line="35" pos:column="44">= <expr><block pos:line="35" pos:column="46">{ <expr><lit:literal type="string" pos:line="35" pos:column="48">".gif"</lit:literal></expr>, <expr><lit:literal type="string" pos:line="35" pos:column="56">".png"</lit:literal></expr>, <expr><lit:literal type="string" pos:line="35" pos:column="64">".jpeg"</lit:literal></expr>, <expr><lit:literal type="string" pos:line="35" pos:column="73">".jpg"</lit:literal></expr> }</block></expr></init></decl>;</decl_stmt>
                <for pos:line="36" pos:column="17">for (<init><decl><type><name pos:line="36" pos:column="22">int</name></type> <name pos:line="36" pos:column="26">i</name> <init pos:line="36" pos:column="28">= <expr><lit:literal type="number" pos:line="36" pos:column="30">0</lit:literal></expr></init></decl>;</init> <condition><expr><name pos:line="36" pos:column="33">i</name> <op:operator pos:line="36" pos:column="35">&lt;</op:operator> <name><name pos:line="36" pos:column="37">allowedExtensions</name><op:operator pos:line="36" pos:column="54">.</op:operator><name pos:line="36" pos:column="55">Length</name></name></expr>;</condition> <incr><expr><name pos:line="36" pos:column="63">i</name><op:operator pos:line="36" pos:column="64">++</op:operator></expr></incr>)
                <block pos:line="37" pos:column="17">{
                    <if pos:line="38" pos:column="21">if <condition pos:line="38" pos:column="24">(<expr><name pos:line="38" pos:column="25">fileExtension</name> <op:operator pos:line="38" pos:column="39">==</op:operator> <name><name pos:line="38" pos:column="42">allowedExtensions</name><index pos:line="38" pos:column="59">[<expr><name pos:line="38" pos:column="60">i</name></expr>]</index></name></expr>)</condition><then pos:line="38" pos:column="63">
                    <block pos:line="39" pos:column="21">{
                        <expr_stmt><expr><name pos:line="40" pos:column="25">fileOK</name> <op:operator pos:line="40" pos:column="32">=</op:operator> <lit:literal type="boolean" pos:line="40" pos:column="34">true</lit:literal></expr>;</expr_stmt>
                    }</block></then></if>
                }</block></for>
            }</block></then></if>

            <if pos:line="45" pos:column="13">if <condition pos:line="45" pos:column="16">(<expr><name pos:line="45" pos:column="17">fileOK</name></expr>)</condition><then pos:line="45" pos:column="24">
            <block pos:line="46" pos:column="13">{
                <try pos:line="47" pos:column="17">try
                <block pos:line="48" pos:column="17">{
                    <comment type="line" pos:line="49" pos:column="21">// Save to Images folder.</comment>
                    <expr_stmt><expr><call><name><name pos:line="50" pos:column="21">ProductImage</name><op:operator pos:line="50" pos:column="33">.</op:operator><name pos:line="50" pos:column="34">PostedFile</name><op:operator pos:line="50" pos:column="44">.</op:operator><name pos:line="50" pos:column="45">SaveAs</name></name><argument_list pos:line="50" pos:column="51">(<argument><expr><name pos:line="50" pos:column="52">path</name> <op:operator pos:line="50" pos:column="57">+</op:operator> <name><name pos:line="50" pos:column="59">ProductImage</name><op:operator pos:line="50" pos:column="71">.</op:operator><name pos:line="50" pos:column="72">FileName</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                    <comment type="line" pos:line="51" pos:column="21">// Save to Images/Thumbs folder.</comment>
                    <expr_stmt><expr><call><name><name pos:line="52" pos:column="21">ProductImage</name><op:operator pos:line="52" pos:column="33">.</op:operator><name pos:line="52" pos:column="34">PostedFile</name><op:operator pos:line="52" pos:column="44">.</op:operator><name pos:line="52" pos:column="45">SaveAs</name></name><argument_list pos:line="52" pos:column="51">(<argument><expr><name pos:line="52" pos:column="52">path</name> <op:operator pos:line="52" pos:column="57">+</op:operator> <lit:literal type="string" pos:line="52" pos:column="59">"Thumbs/"</lit:literal> <op:operator pos:line="52" pos:column="69">+</op:operator> <name><name pos:line="52" pos:column="71">ProductImage</name><op:operator pos:line="52" pos:column="83">.</op:operator><name pos:line="52" pos:column="84">FileName</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                }</block>
                <catch pos:line="54" pos:column="17">catch <parameter_list pos:line="54" pos:column="23">(<param><decl><type><name pos:line="54" pos:column="24">Exception</name></type> <name pos:line="54" pos:column="34">ex</name></decl></param>)</parameter_list>
                <block pos:line="55" pos:column="17">{
                    <expr_stmt><expr><name><name pos:line="56" pos:column="21">LabelAddStatus</name><op:operator pos:line="56" pos:column="35">.</op:operator><name pos:line="56" pos:column="36">Text</name></name> <op:operator pos:line="56" pos:column="41">=</op:operator> <name><name pos:line="56" pos:column="43">ex</name><op:operator pos:line="56" pos:column="45">.</op:operator><name pos:line="56" pos:column="46">Message</name></name></expr>;</expr_stmt>
                }</block></catch></try>

                <comment type="line" pos:line="59" pos:column="17">// Add product data to DB.</comment>
                <decl_stmt><decl><type><name pos:line="60" pos:column="17">AddProducts</name></type> <name pos:line="60" pos:column="29">products</name> <init pos:line="60" pos:column="38">= <expr><op:operator pos:line="60" pos:column="40">new</op:operator> <call><name pos:line="60" pos:column="44">AddProducts</name><argument_list pos:line="60" pos:column="55">()</argument_list></call></expr></init></decl>;</decl_stmt>
                <decl_stmt><decl><type><name pos:line="61" pos:column="17">bool</name></type> <name pos:line="61" pos:column="22">addSuccess</name> <init pos:line="61" pos:column="33">= <expr><call><name><name pos:line="61" pos:column="35">products</name><op:operator pos:line="61" pos:column="43">.</op:operator><name pos:line="61" pos:column="44">AddProduct</name></name><argument_list pos:line="61" pos:column="54">(<argument><expr><name><name pos:line="61" pos:column="55">AddProductName</name><op:operator pos:line="61" pos:column="69">.</op:operator><name pos:line="61" pos:column="70">Text</name></name></expr></argument>, <argument><expr><name><name pos:line="61" pos:column="76">AddProductDescription</name><op:operator pos:line="61" pos:column="97">.</op:operator><name pos:line="61" pos:column="98">Text</name></name></expr></argument>,
                    <argument><expr><name><name pos:line="62" pos:column="21">AddProductPrice</name><op:operator pos:line="62" pos:column="36">.</op:operator><name pos:line="62" pos:column="37">Text</name></name></expr></argument>, <argument><expr><name><name pos:line="62" pos:column="43">DropDownAddCategory</name><op:operator pos:line="62" pos:column="62">.</op:operator><name pos:line="62" pos:column="63">SelectedValue</name></name></expr></argument>, <argument><expr><name><name pos:line="62" pos:column="78">ProductImage</name><op:operator pos:line="62" pos:column="90">.</op:operator><name pos:line="62" pos:column="91">FileName</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <if pos:line="63" pos:column="17">if <condition pos:line="63" pos:column="20">(<expr><name pos:line="63" pos:column="21">addSuccess</name></expr>)</condition><then pos:line="63" pos:column="32">
                <block pos:line="64" pos:column="17">{
                    <comment type="line" pos:line="65" pos:column="21">// Reload the page.</comment>
                    <decl_stmt><decl><type><name pos:line="66" pos:column="21">string</name></type> <name pos:line="66" pos:column="28">pageUrl</name> <init pos:line="66" pos:column="36">= <expr><call><name><name pos:line="66" pos:column="38">Request</name><op:operator pos:line="66" pos:column="45">.</op:operator><name pos:line="66" pos:column="46">Url</name><op:operator pos:line="66" pos:column="49">.</op:operator><name pos:line="66" pos:column="50">AbsoluteUri</name><op:operator pos:line="66" pos:column="61">.</op:operator><name pos:line="66" pos:column="62">Substring</name></name><argument_list pos:line="66" pos:column="71">(<argument><expr><lit:literal type="number" pos:line="66" pos:column="72">0</lit:literal></expr></argument>, <argument><expr><call><name><name pos:line="66" pos:column="75">Request</name><op:operator pos:line="66" pos:column="82">.</op:operator><name pos:line="66" pos:column="83">Url</name><op:operator pos:line="66" pos:column="86">.</op:operator><name pos:line="66" pos:column="87">AbsoluteUri</name><op:operator pos:line="66" pos:column="98">.</op:operator><name pos:line="66" pos:column="99">Count</name></name><argument_list pos:line="66" pos:column="104">()</argument_list></call> <op:operator pos:line="66" pos:column="107">-</op:operator> <call><name><name pos:line="66" pos:column="109">Request</name><op:operator pos:line="66" pos:column="116">.</op:operator><name pos:line="66" pos:column="117">Url</name><op:operator pos:line="66" pos:column="120">.</op:operator><name pos:line="66" pos:column="121">Query</name><op:operator pos:line="66" pos:column="126">.</op:operator><name pos:line="66" pos:column="127">Count</name></name><argument_list pos:line="66" pos:column="132">()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                    <expr_stmt><expr><call><name><name pos:line="67" pos:column="21">Response</name><op:operator pos:line="67" pos:column="29">.</op:operator><name pos:line="67" pos:column="30">Redirect</name></name><argument_list pos:line="67" pos:column="38">(<argument><expr><name pos:line="67" pos:column="39">pageUrl</name> <op:operator pos:line="67" pos:column="47">+</op:operator> <lit:literal type="string" pos:line="67" pos:column="49">"?ProductAction=add"</lit:literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                }</block></then>
                <else pos:line="69" pos:column="17">else
                <block pos:line="70" pos:column="17">{
                    <expr_stmt><expr><name><name pos:line="71" pos:column="21">LabelAddStatus</name><op:operator pos:line="71" pos:column="35">.</op:operator><name pos:line="71" pos:column="36">Text</name></name> <op:operator pos:line="71" pos:column="41">=</op:operator> <lit:literal type="string" pos:line="71" pos:column="43">"Unable to add new product to database."</lit:literal></expr>;</expr_stmt>
                }</block></else></if>
            }</block></then>
            <else pos:line="74" pos:column="13">else
            <block pos:line="75" pos:column="13">{
                <expr_stmt><expr><name><name pos:line="76" pos:column="17">LabelAddStatus</name><op:operator pos:line="76" pos:column="31">.</op:operator><name pos:line="76" pos:column="32">Text</name></name> <op:operator pos:line="76" pos:column="37">=</op:operator> <lit:literal type="string" pos:line="76" pos:column="39">"Unable to accept file type."</lit:literal></expr>;</expr_stmt>
            }</block></else></if>
        }</block></function>

        <function><type><specifier pos:line="80" pos:column="9">public</specifier> <name><name pos:line="80" pos:column="16">IQueryable</name><argument_list pos:line="80" pos:column="26">&lt;<argument><name pos:line="80" pos:column="27">Category</name></argument>&gt;</argument_list></name></type> <name pos:line="80" pos:column="37">GetCategories</name><parameter_list pos:line="80" pos:column="50">()</parameter_list>
        <block pos:line="81" pos:column="9">{
            <decl_stmt><decl><type><name pos:line="82" pos:column="13">var</name></type> <name pos:line="82" pos:column="17">db</name> <init pos:line="82" pos:column="20">= <expr><op:operator pos:line="82" pos:column="22">new</op:operator> <call><name><name pos:line="82" pos:column="26">WingtipToys</name><op:operator pos:line="82" pos:column="37">.</op:operator><name pos:line="82" pos:column="38">Models</name><op:operator pos:line="82" pos:column="44">.</op:operator><name pos:line="82" pos:column="45">ProductContext</name></name><argument_list pos:line="82" pos:column="59">()</argument_list></call></expr></init></decl>;</decl_stmt>
            <decl_stmt><decl><type><name><name pos:line="83" pos:column="13">IQueryable</name><argument_list pos:line="83" pos:column="23">&lt;<argument><name pos:line="83" pos:column="24">Category</name></argument>&gt;</argument_list></name></type> <name pos:line="83" pos:column="34">query</name> <init pos:line="83" pos:column="40">= <expr><name><name pos:line="83" pos:column="42">db</name><op:operator pos:line="83" pos:column="44">.</op:operator><name pos:line="83" pos:column="45">Categories</name></name></expr></init></decl>;</decl_stmt>
            <return pos:line="84" pos:column="13">return <expr><name pos:line="84" pos:column="20">query</name></expr>;</return>
        }</block></function>

        <function><type><specifier pos:line="87" pos:column="9">public</specifier> <name><name pos:line="87" pos:column="16">IQueryable</name><argument_list pos:line="87" pos:column="26">&lt;<argument><name pos:line="87" pos:column="27">Product</name></argument>&gt;</argument_list></name></type> <name pos:line="87" pos:column="36">GetProducts</name><parameter_list pos:line="87" pos:column="47">()</parameter_list>
        <block pos:line="88" pos:column="9">{
            <decl_stmt><decl><type><name pos:line="89" pos:column="13">var</name></type> <name pos:line="89" pos:column="17">db</name> <init pos:line="89" pos:column="20">= <expr><op:operator pos:line="89" pos:column="22">new</op:operator> <call><name><name pos:line="89" pos:column="26">WingtipToys</name><op:operator pos:line="89" pos:column="37">.</op:operator><name pos:line="89" pos:column="38">Models</name><op:operator pos:line="89" pos:column="44">.</op:operator><name pos:line="89" pos:column="45">ProductContext</name></name><argument_list pos:line="89" pos:column="59">()</argument_list></call></expr></init></decl>;</decl_stmt>
            <decl_stmt><decl><type><name><name pos:line="90" pos:column="13">IQueryable</name><argument_list pos:line="90" pos:column="23">&lt;<argument><name pos:line="90" pos:column="24">Product</name></argument>&gt;</argument_list></name></type> <name pos:line="90" pos:column="33">query</name> <init pos:line="90" pos:column="39">= <expr><name><name pos:line="90" pos:column="41">db</name><op:operator pos:line="90" pos:column="43">.</op:operator><name pos:line="90" pos:column="44">Products</name></name></expr></init></decl>;</decl_stmt>
            <return pos:line="91" pos:column="13">return <expr><name pos:line="91" pos:column="20">query</name></expr>;</return>
        }</block></function>

        <function><type><specifier pos:line="94" pos:column="9">protected</specifier> <name pos:line="94" pos:column="19">void</name></type> <name pos:line="94" pos:column="24">RemoveProductButton_Click</name><parameter_list pos:line="94" pos:column="49">(<param><decl><type><name pos:line="94" pos:column="50">object</name></type> <name pos:line="94" pos:column="57">sender</name></decl></param>, <param><decl><type><name pos:line="94" pos:column="65">EventArgs</name></type> <name pos:line="94" pos:column="75">e</name></decl></param>)</parameter_list>
        <block pos:line="95" pos:column="9">{
            <decl_stmt><decl><type><name pos:line="96" pos:column="13">var</name></type> <name pos:line="96" pos:column="17">db</name> <init pos:line="96" pos:column="20">= <expr><op:operator pos:line="96" pos:column="22">new</op:operator> <call><name><name pos:line="96" pos:column="26">WingtipToys</name><op:operator pos:line="96" pos:column="37">.</op:operator><name pos:line="96" pos:column="38">Models</name><op:operator pos:line="96" pos:column="44">.</op:operator><name pos:line="96" pos:column="45">ProductContext</name></name><argument_list pos:line="96" pos:column="59">()</argument_list></call></expr></init></decl>;</decl_stmt>
            <decl_stmt><decl><type><name pos:line="97" pos:column="13">int</name></type> <name pos:line="97" pos:column="17">productId</name> <init pos:line="97" pos:column="27">= <expr><call><name><name pos:line="97" pos:column="29">Convert</name><op:operator pos:line="97" pos:column="36">.</op:operator><name pos:line="97" pos:column="37">ToInt16</name></name><argument_list pos:line="97" pos:column="44">(<argument><expr><name><name pos:line="97" pos:column="45">DropDownRemoveProduct</name><op:operator pos:line="97" pos:column="66">.</op:operator><name pos:line="97" pos:column="67">SelectedValue</name></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
            <decl_stmt><decl><type><name pos:line="98" pos:column="13">var</name></type> <name pos:line="98" pos:column="17">myItem</name> <init pos:line="98" pos:column="24">= <expr><op:operator pos:line="98" pos:column="26">(</op:operator><linq><from pos:line="98" pos:column="27">from <expr><name pos:line="98" pos:column="32">c</name></expr> <in pos:line="98" pos:column="34">in <expr><name><name pos:line="98" pos:column="37">db</name><op:operator pos:line="98" pos:column="39">.</op:operator><name pos:line="98" pos:column="40">Products</name></name></expr></in></from> <where pos:line="98" pos:column="49">where <expr><name><name pos:line="98" pos:column="55">c</name><op:operator pos:line="98" pos:column="56">.</op:operator><name pos:line="98" pos:column="57">ProductID</name></name> <op:operator pos:line="98" pos:column="67">==</op:operator> <name pos:line="98" pos:column="70">productId</name></expr></where> <select pos:line="98" pos:column="80">select <expr><name pos:line="98" pos:column="87">c</name></expr></select></linq><op:operator pos:line="98" pos:column="88">)</op:operator><op:operator pos:line="98" pos:column="89">.</op:operator><call><name pos:line="98" pos:column="90">FirstOrDefault</name><argument_list pos:line="98" pos:column="104">()</argument_list></call></expr></init></decl>;</decl_stmt>
            <if pos:line="99" pos:column="13">if <condition pos:line="99" pos:column="16">(<expr><name pos:line="99" pos:column="17">myItem</name> <op:operator pos:line="99" pos:column="24">!=</op:operator> <name pos:line="99" pos:column="27">null</name></expr>)</condition><then pos:line="99" pos:column="32">
            <block pos:line="100" pos:column="13">{
                <expr_stmt><expr><call><name><name pos:line="101" pos:column="17">db</name><op:operator pos:line="101" pos:column="19">.</op:operator><name pos:line="101" pos:column="20">Products</name><op:operator pos:line="101" pos:column="28">.</op:operator><name pos:line="101" pos:column="29">Remove</name></name><argument_list pos:line="101" pos:column="35">(<argument><expr><name pos:line="101" pos:column="36">myItem</name></expr></argument>)</argument_list></call></expr>;</expr_stmt>
                <expr_stmt><expr><call><name><name pos:line="102" pos:column="17">db</name><op:operator pos:line="102" pos:column="19">.</op:operator><name pos:line="102" pos:column="20">SaveChanges</name></name><argument_list pos:line="102" pos:column="31">()</argument_list></call></expr>;</expr_stmt>

                <comment type="line" pos:line="104" pos:column="17">// Reload the page.</comment>
                <decl_stmt><decl><type><name pos:line="105" pos:column="17">string</name></type> <name pos:line="105" pos:column="24">pageUrl</name> <init pos:line="105" pos:column="32">= <expr><call><name><name pos:line="105" pos:column="34">Request</name><op:operator pos:line="105" pos:column="41">.</op:operator><name pos:line="105" pos:column="42">Url</name><op:operator pos:line="105" pos:column="45">.</op:operator><name pos:line="105" pos:column="46">AbsoluteUri</name><op:operator pos:line="105" pos:column="57">.</op:operator><name pos:line="105" pos:column="58">Substring</name></name><argument_list pos:line="105" pos:column="67">(<argument><expr><lit:literal type="number" pos:line="105" pos:column="68">0</lit:literal></expr></argument>, <argument><expr><call><name><name pos:line="105" pos:column="71">Request</name><op:operator pos:line="105" pos:column="78">.</op:operator><name pos:line="105" pos:column="79">Url</name><op:operator pos:line="105" pos:column="82">.</op:operator><name pos:line="105" pos:column="83">AbsoluteUri</name><op:operator pos:line="105" pos:column="94">.</op:operator><name pos:line="105" pos:column="95">Count</name></name><argument_list pos:line="105" pos:column="100">()</argument_list></call> <op:operator pos:line="105" pos:column="103">-</op:operator> <call><name><name pos:line="105" pos:column="105">Request</name><op:operator pos:line="105" pos:column="112">.</op:operator><name pos:line="105" pos:column="113">Url</name><op:operator pos:line="105" pos:column="116">.</op:operator><name pos:line="105" pos:column="117">Query</name><op:operator pos:line="105" pos:column="122">.</op:operator><name pos:line="105" pos:column="123">Count</name></name><argument_list pos:line="105" pos:column="128">()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt>
                <expr_stmt><expr><call><name><name pos:line="106" pos:column="17">Response</name><op:operator pos:line="106" pos:column="25">.</op:operator><name pos:line="106" pos:column="26">Redirect</name></name><argument_list pos:line="106" pos:column="34">(<argument><expr><name pos:line="106" pos:column="35">pageUrl</name> <op:operator pos:line="106" pos:column="43">+</op:operator> <lit:literal type="string" pos:line="106" pos:column="45">"?ProductAction=remove"</lit:literal></expr></argument>)</argument_list></call></expr>;</expr_stmt>
            }</block></then>
            <else pos:line="108" pos:column="13">else
            <block pos:line="109" pos:column="13">{
                <expr_stmt><expr><name><name pos:line="110" pos:column="17">LabelRemoveStatus</name><op:operator pos:line="110" pos:column="34">.</op:operator><name pos:line="110" pos:column="35">Text</name></name> <op:operator pos:line="110" pos:column="40">=</op:operator> <lit:literal type="string" pos:line="110" pos:column="42">"Unable to locate product."</lit:literal></expr>;</expr_stmt>
            }</block></else></if>
        }</block></function>
    }</block></class>
}</block></namespace>
</unit>
